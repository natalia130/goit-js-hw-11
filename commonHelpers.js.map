{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst formElem = document.querySelector(\".form\");\nconst galleryElem = document.querySelector(\".gallery\");\nconst loaderElem = document.querySelector(\".loader\");\n\nformElem.addEventListener(\"submit\", onFormSubmit);\n\nfunction onFormSubmit(event) {\n    event.preventDefault();\n    galleryElem.innerHTML = \"\";\n    const userQuery = event.target.elements.query.value.trim();\n    if (userQuery === \"\") {\n        iziToast.warning({\n            title: \"\",\n            message: \"Please enter a search query\",\n            position: 'topCenter',\n        });\n    } else {\n        loaderElem.classList.remove(\"visually-hidden\");\n        getImgByQuery(userQuery).then(data => {\n            loaderElem.classList.add(\"visually-hidden\");\n            if (data.hits.length > 0) {\n                renderTicker(data);\n            } else {\n                iziToast.warning({\n                    title: \"\",\n                    message: \"Sorry, there are no images matching your search query. Please try again!\",\n                    position: 'topCenter',\n                });\n            }\n        }).catch(error => {\n            console.log(error);\n        });\n        event.target.reset();\n    }\n    \n}\n\nfunction getImgByQuery(userQuery) {\n    const BASE_URL = \"https://pixabay.com/api/\";\n    const KEY = \"?key=42441384-ae09b834f94a4016fb8b80a97\";\n    const Q = `&q=${userQuery}`;\n    const IMAGE_TYPE = \"&image_type=photo\";\n    const ORIENTATION = \"&orientation=horizontal\";\n    const SAFESEARCH = \"&safesearch=true\";\n    const url = BASE_URL + KEY + Q + IMAGE_TYPE + ORIENTATION + SAFESEARCH;\n\n    const options = {\n        headers: {\n        },\n    };\n    return fetch(url, options).then(res => {\n        if (res.ok) {\n            return res.json()\n        } else {\n            throw new Error(res.status);\n        }\n    });\n}\n\nfunction imgTemplate(img) {\n    return `<li class=\"gallery-item\">\n        <a class=\"gallery-link\"\n            href=\"${img.largeImageURL}\">\n            <img class=\"gallery-image\"\n                src=\"${img.webformatURL}\"\n                alt=\"${img.tags}\" />\n        </a>\n        <div class = \"gallery-item-info\">\n                <ul>Likes<li>${img.likes}</li></ul>\n                <ul>Views<li>${img.views}</li></ul>\n                <ul>Comments<li>${img.comments}</li></ul>\n                <ul>Downloads<li>${img.downloads}</li></ul>\n        </div>\n    </li>`\n}\n\nfunction renderTicker(obj) {\n    const markup = obj.hits.map(imgTemplate).join(\"\");\n    galleryElem.innerHTML = markup;\n    lightbox.refresh();\n}\n\nconst lightbox = new SimpleLightbox(\".gallery-link\", { captionsData: \"alt\", captionDelay: 250 });\n\n\n"],"names":["formElem","galleryElem","loaderElem","onFormSubmit","event","userQuery","iziToast","getImgByQuery","data","renderTicker","error","BASE_URL","KEY","Q","IMAGE_TYPE","ORIENTATION","SAFESEARCH","url","res","imgTemplate","img","obj","markup","lightbox","SimpleLightbox"],"mappings":"6vBAMA,MAAMA,EAAW,SAAS,cAAc,OAAO,EACzCC,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAa,SAAS,cAAc,SAAS,EAEnDF,EAAS,iBAAiB,SAAUG,CAAY,EAEhD,SAASA,EAAaC,EAAO,CACzBA,EAAM,eAAc,EACpBH,EAAY,UAAY,GACxB,MAAMI,EAAYD,EAAM,OAAO,SAAS,MAAM,MAAM,OAChDC,IAAc,GACdC,EAAS,QAAQ,CACb,MAAO,GACP,QAAS,8BACT,SAAU,WACtB,CAAS,GAEDJ,EAAW,UAAU,OAAO,iBAAiB,EAC7CK,EAAcF,CAAS,EAAE,KAAKG,GAAQ,CAClCN,EAAW,UAAU,IAAI,iBAAiB,EACtCM,EAAK,KAAK,OAAS,EACnBC,EAAaD,CAAI,EAEjBF,EAAS,QAAQ,CACb,MAAO,GACP,QAAS,2EACT,SAAU,WAC9B,CAAiB,CAEjB,CAAS,EAAE,MAAMI,GAAS,CACd,QAAQ,IAAIA,CAAK,CAC7B,CAAS,EACDN,EAAM,OAAO,QAGrB,CAEA,SAASG,EAAcF,EAAW,CAC9B,MAAMM,EAAW,2BACXC,EAAM,0CACNC,EAAI,MAAMR,CAAS,GACnBS,EAAa,oBACbC,EAAc,0BACdC,EAAa,mBACbC,EAAMN,EAAWC,EAAMC,EAAIC,EAAaC,EAAcC,EAM5D,OAAO,MAAMC,EAJG,CACZ,QAAS,CACR,CACT,CAC6B,EAAE,KAAKC,GAAO,CACnC,GAAIA,EAAI,GACJ,OAAOA,EAAI,KAAM,EAEjB,MAAM,IAAI,MAAMA,EAAI,MAAM,CAEtC,CAAK,CACL,CAEA,SAASC,EAAYC,EAAK,CACtB,MAAO;AAAA;AAAA,oBAESA,EAAI,aAAa;AAAA;AAAA,uBAEdA,EAAI,YAAY;AAAA,uBAChBA,EAAI,IAAI;AAAA;AAAA;AAAA,+BAGAA,EAAI,KAAK;AAAA,+BACTA,EAAI,KAAK;AAAA,kCACNA,EAAI,QAAQ;AAAA,mCACXA,EAAI,SAAS;AAAA;AAAA,UAGhD,CAEA,SAASX,EAAaY,EAAK,CACvB,MAAMC,EAASD,EAAI,KAAK,IAAIF,CAAW,EAAE,KAAK,EAAE,EAChDlB,EAAY,UAAYqB,EACxBC,EAAS,QAAO,CACpB,CAEA,MAAMA,EAAW,IAAIC,EAAe,gBAAiB,CAAE,aAAc,MAAO,aAAc,IAAK"}